var args = arguments[0] || {};
var username = args.username;

Alloy.Collections.interest.fetch();
Alloy.Collections.house.fetch();

function showInterest() {
	var xhr = Ti.Network.createHTTPClient();    
    xhr.open("POST", "http://158.182.109.38:1337/house/interested");
    xhr.onload = function(e) {
    	if (this.responseText == "No such user" || this.responseText == "Wrong password") {
        	alert(this.responseText);
      	} else {
      		var userInfoController = Alloy.createController("userInfo", {
				username: $.username.value
			});		
			Alloy.Globals.index.activeTab.open(userInfoController.getView());
      	}
    };
    
    xhr.send({
        "username": $.username.value,
        "password": $.password.value
    });
}

function showHouseDetails(e) {
	var houseDetailsController = Alloy.createController("houseDetails", {
		house_id: e.row.fid	
	});
	
	Alloy.Globals.index.setActiveTab(0);
	Alloy.Globals.index.activeTab.open(houseDetailsController.getView());
}
